<?php


/**********************************************************************************/
/*** THIS FILE HAS BEEN AUTOMATICALLY GENERATED BY THE PANICKAPPS API GENERATOR ***/

/*                It is HIGHLY suggested that you do not edit this file.          */

//  DATABASE:     easybusiness
//  FILE:         _old_products.php
//  TABLE:        _old_products
//  DATETIME:     2018-01-25 01:20:25pm
//  DESCRIPTION:  N/A

/**********************************************************************************/
			

class _old_products implements JsonSerializable {

	//-------------------- Attributes --------------------

    private $id;
    private $name;
    private $price;
    private $product_type_id;
    private $bar_code;
    private $best_before_range;
    private $recipe_id;

	//-------------------- Constructor --------------------

    public function __construct(
		$id, 
		$name, 
		$price, 
		$product_type_id, 
		$bar_code, 
		$best_before_range, 
		$recipe_id
		) {
        $this->id = $id;
		$this->name = $name;
		$this->price = $price;
		$this->product_type_id = $product_type_id;
		$this->bar_code = $bar_code;
		$this->best_before_range = $best_before_range;
		$this->recipe_id = $recipe_id;
    }

	//-------------------- Reflectors --------------------

	public static $allFields = array(
		"id", 
		"name", 
		"price", 
		"product_type_id", 
		"bar_code", 
		"best_before_range", 
		"recipe_id"
	);

	public static $hasUniqueFields = false;

	//-------------------- Getter Methods --------------------

	/**
     * @return int(10) unsigned
     */
     public function getId() { return $this->id; }

	/**
     * @return varchar(255)
     */
     public function getName() { return $this->name; }

	/**
     * @return double
     */
     public function getPrice() { return $this->price; }

	/**
     * @return int(11)
     */
     public function getProduct_type_id() { return $this->product_type_id; }

	/**
     * @return varchar(255)
     */
     public function getBar_code() { return $this->bar_code; }

	/**
     * @return int(11)
     */
     public function getBest_before_range() { return $this->best_before_range; }

	/**
     * @return int(11)
     */
     public function getRecipe_id() { return $this->recipe_id; }


    /**
     * @return int(10) unsigned
     */
     public function getObjectID() { return $this->id; }


	//-------------------- Setter Methods --------------------

	/**
     * @param $value varchar(255)
     */
     public function setName($value) { $this->name = $value; }

	/**
     * @param $value double
     */
     public function setPrice($value) { $this->price = $value; }

	/**
     * @param $value int(11)
     */
     public function setProduct_type_id($value) { $this->product_type_id = $value; }

	/**
     * @param $value varchar(255)
     */
     public function setBar_code($value) { $this->bar_code = $value; }

	/**
     * @param $value int(11)
     */
     public function setBest_before_range($value) { $this->best_before_range = $value; }

	/**
     * @param $value int(11)
     */
     public function setRecipe_id($value) { $this->recipe_id = $value; }


	//-------------------- Static (Database) Methods --------------------

            
            
    /**
     * Creates a database entry with the given object's data.
     * @param $t1_object _old_products
     * @return bool
     */
    public static function create($_old_products_object) {
        $conn = dbLogin();
        $sql = "INSERT INTO _old_products (name, price, product_type_id, bar_code, best_before_range, recipe_id) VALUES (\"" . $_old_products_object->name . "\", $_old_products_object->price, $_old_products_object->product_type_id, \"" . $_old_products_object->bar_code . "\", $_old_products_object->best_before_range, $_old_products_object->recipe_id)";
        if ($conn->query($sql) === TRUE) return true;
        else return false;
    }


     /**
     * Retrieves a database entry matching the ID value provided.
     * @param $id int(10) unsigned
     * @return bool|_old_products
     */
    public static function getByID($id) {
        $conn = dbLogin();
        $sql = "SELECT * FROM _old_products WHERE id = " . $id;
        $result = $conn->query($sql);
        $sqlRowItemAsAssocArray = null;
        if ($result->num_rows > 0) {
            $sqlRowItemAsAssocArray = $result->fetch_assoc();
            $object = new _old_products(
				$sqlRowItemAsAssocArray["id"], 
				$sqlRowItemAsAssocArray["name"], 
				$sqlRowItemAsAssocArray["price"], 
				$sqlRowItemAsAssocArray["product_type_id"], 
				$sqlRowItemAsAssocArray["bar_code"], 
				$sqlRowItemAsAssocArray["best_before_range"], 
				$sqlRowItemAsAssocArray["recipe_id"]);
            return $object;
        }
        else return false;
    }


    /**
     * Retrieves all entries or up to a specified limit from the database. Use 0 or negative values as limit to retrieve all entries.
     * @param $limit int
     * @return array|bool
     */
    public static function getMultiple($limit) {
        $conn = dbLogin();
        $sql = "SELECT * FROM _old_products";
        if ($limit > 0) $sql .= " LIMIT " . $limit;
        $result = $conn->query($sql);
        $itemsArray = array();
        if ($result->num_rows > 0) {
            if ($result->num_rows > 0) {
                while($row = $result->fetch_assoc()) {
                    $object = new _old_products(
				$row["id"], 
				$row["name"], 
				$row["price"], 
				$row["product_type_id"], 
				$row["bar_code"], 
				$row["best_before_range"], 
				$row["recipe_id"]);
                    array_push($itemsArray, $object);
                }
            }
            return $itemsArray;
        }
        return false;
    }


    /**
     * Updates a database entry with the given object's data.
     * @param $t1_object _old_products
     * @return bool
     */
    public static function update($_old_products_object) {
        $conn = dbLogin();
        $sql = "UPDATE _old_products SET name = \"" . $_old_products_object->getName() . "\", price = " . $_old_products_object->getPrice() . ", product_type_id = " . $_old_products_object->getProduct_type_id() . ", bar_code = \"" . $_old_products_object->getBar_code() . "\", best_before_range = " . $_old_products_object->getBest_before_range() . ", recipe_id = " . $_old_products_object->getRecipe_id() . " WHERE id = " . $_old_products_object->getId();
        $conn->query($sql);
        if ($conn->affected_rows > 0) return true;
        else return false;
    }


    /**
     * Deletes an entry from the database given the object's data.
     * @param $id Int(10) unsigned
     * @return bool
     */
    public static function delete($id) {
        $conn = dbLogin();
        $sql = "DELETE FROM _old_products WHERE id = \"" . $id . "\"";
        $result = $conn->query($sql);
        if ($conn->affected_rows > 0) return true;
        else return false;
    }


    /**
     * Returns the number of entries in the database.
     * @return int
     */
    public static function getSize() {
        $conn = dbLogin();
        $sql = "SHOW TABLE STATUS WHERE Name = \"_old_products\"";
        $result = $conn->query($sql);
        if ($result) return $result->fetch_object()->Rows;
        else return false;
    }


    /**
     * Returns true if the database is empty or false otherwise.
     * @return bool
     */
    public static function isEmpty() {
        $size = self::getSize();
        return ($size == 0);
    }


    /**
     * Searches the database for matches in the given field-value pairs in the given associative array.
     * The array should be in the format FieldName -> ValueToSearch where both values are strings.
     * @return array|bool
     */
    public static function searchByFields($fieldsAndValuesAssocArray) {
        $conn = dbLogin();
        
        $combinedWhereClause = "";
        
        foreach ($fieldsAndValuesAssocArray as $field => $value) {
            $combinedWhereClause .= $field . " = \"" . $value . "\" AND ";
        }
        $combinedWhereClause = substr($combinedWhereClause, 0, strlen($combinedWhereClause) - 4);
        
        $sql = "SELECT * FROM _old_products WHERE " . $combinedWhereClause;
        $result = $conn->query($sql);
        if (!$result) return false;
        $itemsArray = array();
        while ($row = $result->fetch_assoc()) {
            $object = new _old_products(
				$row["id"], 
				$row["name"], 
				$row["price"], 
				$row["product_type_id"], 
				$row["bar_code"], 
				$row["best_before_range"], 
				$row["recipe_id"]);
            array_push($itemsArray, $object);
        }
        return $itemsArray;
    }

	//-------------------- JSON Generation Methods --------------------

    /**
     * Specifies how objects of this class should be converted to JSON format.
     * @return string
     */
    public function jsonSerialize() {
        $jsonStr = "{\"id\": $this->id, \"name\": \"" . $this->name. "\", \"price\": $this->price, \"product_type_id\": $this->product_type_id, \"bar_code\": \"" . $this->bar_code. "\", \"best_before_range\": $this->best_before_range, \"recipe_id\": $this->recipe_id }";
        return $jsonStr;
    }
    
    /**
     * Converts an array of _old_products objects to a JSON Array.
     * @param $_old_products_array _old_products Array
     * @return bool|string
     */
    public static function toJSONArray($_old_products_array) {
        $strArray = "[ ";
        foreach ($_old_products_array as $i) {
            $strArray .= $i->jsonSerialize() . ", ";
        }
        $strArray = substr($strArray, 0, strlen($strArray) - 3);
        $strArray .= "} ] ";
        return $strArray;
    }

}

?>